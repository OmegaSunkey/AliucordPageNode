<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="utf-8">
    <title>Contributing</title>
    <link rel=stylesheet href=style.css>
    <link href="https://fonts.googleapis.com/css?family=Material+Icons&display=block" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">                                      <script src="./node_modules/@webcomponents/webcomponentsjs/webcomponents-loader.js"></script>
  </head>
  <body>
    <mwc-drawer hasHeader type="modal">
     <span slot="title">Aliucord</span>
      <div class="block">
       <a href="download.html">Download</a><br>
       <a href="index.html">Home</a><br>
       <a href="plugin.html">Plugins</a><br>
       <a href="contribute.html" class="ablock" >Contribution</a><br>
      </div>
     <div slot="appContent">
      <mwc-top-app-bar-fixed centerTitle>
       <mwc-icon-button icon="menu" slot="navigationIcon"></mwc-icon-button>
       <div slot="title">Contribution</div>
      </mwc-top-app-bar-fixed>
     </div>
    </mwc-drawer>
       <script type="module">
     import '@material/mwc-top-app-bar-fixed';
     import '@material/mwc-icon-button';
     import '@material/mwc-drawer';
     import '@material/mwc-icon';
     const drawer = document.getElementsByTagName('mwc-drawer')[0]
     if (drawer) {
	const container = drawer.parentNode;
	container.addEventListener('MDCTopAppBar:nav', () => {
	drawer.open = !drawer.open;
	});}
	</script>
    <div class="card">
      <h2>Porting Aliucord to the Latest Discord Version.</h2>
      <p>• Download the apk of the version you want to port to (#official-discord-updates in Aliucord server) <br> <br>
• Decompile it using Apktool<br> </p>
<p class=code>apktool d discord.apk</p> <p>(Replace discord.apk with whatever the file name is) <br> <br>
• Apply manifest.patch to the AndroidManifest.xml file (Using git bash or any shell on Linux or Macos run in the apktool decompile folder: patch < manifest.patch) <br><br>
• IMPORTANT: set targetSDK to 29 in both apktool.yml and AndroidManifest.xml or Aliucord will fail to install<br> <br>
• Rebuild the Discord APK using Apktool <br></p>
<p class=code>apktool b discord</p> <p>(Replace discord with the folder name)<br><br>
• Copy build/apk/AndroidManifest.xml to .assets/AndroidManifest.xml and to Aliucord/AndroidManifest.xml on your Android device<br><br>
• Repeat the same steps and this time add android:debuggable=true in the main category where there's also app name and icon, name this manifest AndroidManifest-debuggable.xml<br><br>
• Change discord_version to the correct one in gradle.properties and resync gradle<br><br>
• Fix any errors you encounter and deploy Aliucord to your device with</p> <p class=code>./gradlew Aliucord:deployWithAdb</p> <p>
• Open Aliucord > Settings > Updater > Top right settings > Use Aliucord.zip from storage and restart Aliucord<br><br>
• Enjoy debugging if all hell breaks loose</p>
    </div>
  </body>
</html>
